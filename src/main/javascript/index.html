<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset = "UTF-8">
    <meta name = "viewport" content = "width=device-width, initial-scale=1.0">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-csv/0.71/jquery.csv-0.71.min.js"></script>
    <script src="https://d3js.org/d3.v3.min.js" charset="utf-8"></script>
    <link rel = "stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <title>KLM Report</title>
</head>
<body >
    <div class = "container">
        <canvas id = "firstChart"></canvas>

    </div>
    <script >
        // $(document).ready(function() {
        //     $.ajax({
        //         type: "GET",
        //         url: "DataToCharts.csv",
        //         dataType: "text",
        //         success: function(data) {processData(data);}
        //     });
        // });


        var ctx = document.getElementById('firstChart').getContext('2d');
        const xLabels = [];
        var chart = new Chart(ctx, {
            // The type of chart we want to create
            type: 'bar',
            // The data for our dataset
            data: {
                labels: xLabels,
                datasets: [{
                    label: null,
                    backgroundColor: 'rgb(0, 0, 0)',
                    borderColor: 'rgb(0, 0, 0)',
                    data: [0, 10, 5, 2, 20, 30, 45]
                }]
            },

            // Configuration options go here
            options: {
                title: {
                    display: true,
                    fontFamily:'Roboto',
                    text: ['Estimated total time per operator','Information on the total time for each operator'],
                    fontSize: 16,
                    
                }              
            }
        });


        // function processData(allText) {
        //     var allTextLines = allText.split(/\r\n|\n/);
        //     var headers = allTextLines[0].split(',');
        //     var lines = [];

        //     for (var i=1; i<allTextLines.length; i++) {
        //         var data = allTextLines[i].split(',');
        //         if (data.length == headers.length) {

        //             var tarr = [];
        //             for (var j=0; j<headers.length; j++) {
        //                 tarr.push(headers[j]+":"+data[j]);
        //             }
        //         lines.push(tarr);
        //     }
        // }


        // getData('C:/Users/Daniel Cunha/Desktop/webbench/DataToCharts.csv');

        // function getData(path){

        //     var csvFile = new XMLHttpRequest();
        //     csvFile.open();


    //         const reader = new FileReader(path);
    //         //reader.readAsBinaryString(path);
    //        // const table = path.split('\n').slice(0);
    //     //     console.log(reader);
    //     //    /* table.forEach( row => {
    //     //         const columns = row.split(',');
    //     //         const klmOperator = columns[0];
    //     //         xLabels.push(klmOperator);
    //     //         const times = columns[1];
    //     //         console.log(klmOperator,times);
    //     //     });*/
    //     //     reader.onload = function () {
    //     //         document.getElementById('csvData').innerHTML = reader.result;
    //     //     };
    //         // start reading the file. When it is done, calls the onload event defined above.
    //         //reader.readAsBinaryString(fileInput.files[0]);

    //         const fs = require('fs').remote;

            
  
    //         fs.readFile(path, (err, data) => { 
    //             if (err) throw err; 
            
    //             console.log(data.toString()); 
    //         }) 

    fetch('DataToCharts.csv')
  .then(response => response.text())
  .then(text => console.log(text))

   

    </script>
</body>
</html>